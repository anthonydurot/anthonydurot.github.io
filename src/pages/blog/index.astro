---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getSortedPosts } from "../../utils/posts";

const posts = await getSortedPosts();
---

<BaseLayout title="Blog Archive | Backend Engineer">
  <section class="py-8">
    <div class="mb-10 border-b border-slate-200 pb-8 dark:border-slate-800">
      <h1
        class="mb-4 text-3xl font-bold tracking-tight text-slate-900 dark:text-white"
      >
        Technical Writing
      </h1>
      <p class="max-w-2xl text-xl text-slate-600 dark:text-slate-400">
        Thoughts on distributed systems, backend architecture, and code.
      </p>
    </div>

    <div class="grid gap-8">
      {
        posts.map((post) => (
          <a href={`/blog/${post.slug}`} class="group relative z-10 block">
            <article class="rounded-lg border border-slate-200 bg-white p-6 shadow-sm transition-all hover:border-blue-500/50 dark:border-slate-700 dark:bg-slate-900 dark:hover:border-blue-400/50">
              <div class="mb-3 flex flex-col gap-2 md:flex-row md:items-baseline md:justify-between">
                <h2 class="text-2xl font-bold text-slate-900 transition-colors group-hover:text-blue-600 dark:text-white dark:group-hover:text-blue-400">
                  {post.data.title}
                </h2>
                <time class="shrink-0 font-mono text-sm text-slate-500">
                  {post.data.pubDate.toLocaleDateString()}
                </time>
              </div>

              <p class="mb-4 line-clamp-2 leading-relaxed text-slate-600 dark:text-slate-400">
                {post.data.description}
              </p>

              <div class="flex gap-2">
                {post.data.tags.map((tag) => (
                  <span class="inline-flex items-center rounded-md bg-slate-100 px-2 py-1 text-xs font-medium text-slate-700 dark:bg-slate-800 dark:text-slate-300">
                    #{tag}
                  </span>
                ))}
              </div>
            </article>
          </a>
        ))
      }
    </div>
  </section>
</BaseLayout>
