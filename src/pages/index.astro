---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getSortedPosts } from "../utils/posts";

const allPosts = await getSortedPosts();
const latestPosts = allPosts.slice(0, 3);
---

<BaseLayout title="Anthony Durot | Senior Cloud Engineer">
  <section class="mb-16 border-b border-slate-200 py-10 dark:border-slate-800">
    <h1
      class="mb-6 text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white"
    >
      Hello, I'm <span class="text-blue-600 dark:text-blue-400">Dev</span>.
    </h1>
    <p
      class="max-w-prose text-xl leading-relaxed text-slate-600 dark:text-slate-300"
    >
      I am a Backend Software Engineer specializing in distributed systems,
      cloud infrastructure, and high-performance APIs. I build things that
      scale.
    </p>
  </section>

  <section>
    <div class="mb-8 flex items-center justify-between">
      <h2
        class="text-2xl font-bold tracking-tight text-slate-900 dark:text-white"
      >
        Recent Writing
      </h2>
      <a
        href="/blog"
        class="text-sm font-medium text-blue-600 hover:underline dark:text-blue-400"
      >
        View all posts →
      </a>
    </div>

    <div class="grid gap-6">
      {
        latestPosts.length > 0 ? (
          latestPosts.map((post) => (
            <a href={`/blog/${post.slug}`} class="group relative z-10 block">
              <article class="rounded-lg border border-slate-200 bg-white p-6 shadow-sm transition-all hover:border-blue-500/50 dark:border-slate-700 dark:bg-slate-900 dark:hover:border-blue-400/50">
                <h3 class="mb-2 text-xl font-bold text-slate-900 transition-colors group-hover:text-blue-600 dark:text-white dark:group-hover:text-blue-400">
                  {post.data.title}
                </h3>
                <p class="mb-4 line-clamp-2 text-slate-600 dark:text-slate-400">
                  {post.data.description}
                </p>
                <div class="flex gap-3 font-mono text-xs uppercase tracking-wide text-slate-500 dark:text-slate-500">
                  <time>{post.data.pubDate.toLocaleDateString()}</time>
                  <span>•</span>
                  <span>{post.data.tags.join(", ")}</span>
                </div>
              </article>
            </a>
          ))
        ) : (
          <p class="text-slate-500">
            No posts found. Add a file to src/content/blog/
          </p>
        )
      }
    </div>
  </section>
</BaseLayout>
